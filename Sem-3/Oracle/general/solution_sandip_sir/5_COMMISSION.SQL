DROP TABLE EMP;

/*******CREATING TABLE***************/
CREATE TABLE EMP
(EMP_NO NUMBER(3),
EMP_NAME VARCHAR2(30),
DEPARTMENT VARCHAR2(30),
SALARY NUMBER(10,2),
COMM NUMBER(10,2));

/***********CREATING TRIGGER*************/
CREATE OR REPLACE TRIGGER commission
BEFORE INSERT OR UPDATE ON EMP
FOR EACH ROW
DECLARE
V_COMM NUMBER;
V_COMM_RATE NUMBER;
V_DEPT VARCHAR2(30);
BEGIN
	V_DEPT:=:NEW.DEPARTMENT;
	IF V_DEPT='SALES' THEN
		V_COMM_RATE:=0.03;
	ELSIF V_DEPT='ACCOUNT' THEN
		V_COMM_RATE:=0.04;
	ELSIF V_DEPT='COMPUTER' THEN
		V_COMM_RATE:=0.10;
	ELSE 
		V_COMM_RATE:=0.07;
	END IF;
	V_COMM:=:NEW.SALARY*V_COMM_RATE;
	:NEW.COMM:=V_COMM;
END;
/
 

/******INSERTING RECORDS*****************/
INSERT INTO EMP (EMP_NO,EMP_NAME,DEPARTMENT,SALARY)
VALUES (1,'A','SALES',10000);

INSERT INTO EMP (EMP_NO,EMP_NAME,DEPARTMENT,SALARY)
VALUES (2,'B','ACCOUNT',10000);

INSERT INTO EMP (EMP_NO,EMP_NAME,DEPARTMENT,SALARY)
VALUES (3,'C','COMPUTER',10000);

INSERT INTO EMP (EMP_NO,EMP_NAME,DEPARTMENT,SALARY)
VALUES (4,'D','MANAGEMENT',10000);

/************WATCHIN DATA*************************/
SELECT * FROM EMP;
