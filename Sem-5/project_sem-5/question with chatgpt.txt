Q-1 =>

in my online movie booking project (note: this project I using this languages --> php, html, css, javascript, ajax, jquery)

home page, login and logout page, new user register page. I have done this much

and note: I am already create this table -->
CREATE TABLE `users` (
  `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(255) NOT NULL,
  `email` VARCHAR(255) NOT NULL UNIQUE,
  `password` VARCHAR(255) NOT NULL,
  `mobile_number` VARCHAR(15) NOT NULL,
  `date` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `modify_date` TIMESTAMP NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
);
in this table save new register user and using this table I want to login

and this table -->
CREATE TABLE IF NOT EXISTS movies (
    id INT AUTO_INCREMENT PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
    genre VARCHAR(100),
    duration VARCHAR(20) NOT NULL,
    rating VARCHAR(10),
    language VARCHAR(80) NOT NULL,
    director VARCHAR(50) NOT NULL,
    image_location VARCHAR(255) NOT NULL,
    description TEXT NOT NULL,
    release_date VARCHAR(20) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP
);
I add around 16 movies data (as movies table)

create MySQL tables query (not one table) --> in a table stored theaters name, theatre location, city, state, zip code, facilities, number of screens, number of seats and seat structure with Available Seats and Booked Seats, show times, show date, bookings, number of tickets, total price, booking date, created at, updated at,....

If I am forgot any field than you add it and create MySQL tables query

if need to connect table than do it 

places make perfectly....





Q-2 =>

give me your create table Example Data Inserts and how do i create a webpage based on this table 
and you not provide number of seats or seat structure with Available Seats and Booked Seats because I make one page(if necessary, add this page to another page., but i'm sure i make this page,,. "seat layout page") for user to select it's seats and book movie 



Q-3 =>

Map-out of my project so far -->
{
index.php => 
	* require_once("connect.php"), header.php, show_movies.php, footer.php : 
	* add this file using include_once() funtion 
	* showing all movies with same info and booking link using show_movies.php file

show_movies.php => 
	* fetching image_location, title, duration, genre
	* booking link is -> <a class="btn btn-primary" href="movie_info.php?id=<?= $row['id'] ?>&" role="button">Booking</a>

movie_info.php =>
	* require_once("connect.php");,  header.php, login check :
	* showing all information about movie then :
	* booking link is -> <a class="btn btn-primary" href="#?id=<?= $row['id'] ?>" role="button" style="width: 95%;">Booking</a> // not provide href link (page)
	* footer.php

}
in movie_info.php file I am not provide href attribute value (next page link)
you (you -> chatgpt) do well from here
provide me map-out. which file is first and where do i add which file ?



Q-4 =>
I am not understand when run "book_seats.php" page 
you not provide "book_seats.php" page link on "seat_selection.php" file. That this file is not run as such
if I understand this wrongly!! than explain me else provide me 

And 
at last 
yes I want to show ticket layout after payment method page which has ticket along with seat number, total price, theater name and theater location along with record in user table (or new table as appropriate...)  In adding, this user has booked this movie in this theater at this time.  (and other necessaryÂ information)


Q-  =>
getting error on executing this query -->
CREATE TABLE IF NOT EXISTS bookings (
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL,
    show_id INT NOT NULL,
    num_tickets INT NOT NULL,
    total_price DECIMAL(10, 2) NOT NULL,
    booking_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
    FOREIGN KEY (show_id) REFERENCES shows(id) ON DELETE CASCADE
);
MySQL said: 

#1005 - Can't create table `v2`.`bookings` (errno: 150 "Foreign key constraint is incorrectly formed")



CREATE TABLE IF NOT EXISTS screens (
    id INT AUTO_INCREMENT PRIMARY KEY,
    theater_id INT NOT NULL,
    screen_number INT NOT NULL,
    num_seats INT NOT NULL,
    seat_structure TEXT,
    available_seats INT NOT NULL,
    booked_seats INT NOT NULL DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (theater_id) REFERENCES theaters(id) ON DELETE CASCADE
);
INSERT INTO screens (theater_id, seat_structure, booked_seats, created_at) VALUES 
(1, 'A1,A2,A3,A4,B1,B2,B3,B4,C1,C2,C3,C4', '', NOW()),
(2, 'A1,A2,A3,A4,B1,B2,B3,B4', '', NOW());

in insert query you not provide me perfectly values 
please provide me all field value on insert query



http://localhost/project_sem-5/seat_selection.php?show_id=1
seat_selection.php is --> 
<?php
require_once("connect.php");
include_once("header.php");
if (!isset($_SESSION['login'])) {
    header("location:login.php");
    exit();
}
?>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }

        .seat-layout {
            display: flex;
            flex-wrap: wrap;
            width: 300px;
            margin: auto;
            padding-top: 50px;
        }

        .seat {
            width: 30px;
            height: 30px;
            margin: 5px;
            text-align: center;
            line-height: 30px;
            cursor: pointer;
        }

        .available {
            background-color: #2ecc71;
        }

        .booked {
            background-color: #e74c3c;
        }

        .selected {
            background-color: #f1c40f;
        }
    </style>
</head>

<body>

    <?php

    $show_id = $_GET['show_id'];
    $result = $conn->query("SELECT sc.seat_structure, sc.booked_seats, th.name as theater_name, th.location as theater_location 
                        FROM screens sc 
                        JOIN shows sh ON sc.id = sh.screen_id 
                        JOIN theaters th ON sc.theater_id = th.id
                        WHERE sh.id = $show_id");

    $seat_data = $result->fetch_assoc();
    $seat_structure = explode(',', $seat_data['seat_structure']);
    $booked_seats = explode(',', $seat_data['booked_seats']);
    ?>

    <h2>Select Your Seats</h2>
    <div class="seat-layout">
        <?php
        foreach ($seat_structure as $seat) {
            $class = in_array($seat, $booked_seats) ? 'booked' : 'available';
            echo "<div class='seat $class' data-seat='$seat'>$seat</div>";
        }
        ?>
    </div>
    <button id="bookSeats">Book Seats</button>

    <script>
        document.querySelectorAll('.seat.available').forEach(seat => {
            seat.addEventListener('click', () => {
                seat.classList.toggle('selected');
            });
        });

        document.getElementById('bookSeats').addEventListener('click', () => {
            const selectedSeats = Array.from(document.querySelectorAll('.seat.selected'))
                .map(seat => seat.dataset.seat);

            fetch('book_seats.php', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        user_id: 1, // Example user ID. In a real application, get this from the session.
                        show_id: <?= $show_id ?>,
                        seats: selectedSeats
                    })
                })
                .then(response => response.json())
                .then(data => {
                    alert(data.message);
                    if (data.status === 'success') {
                        window.location.href = `ticket_layout.php?booking_id=${data.booking_id}`;
                    }
                });
        });
    </script>
</body>
<?php include_once("footer.php"); ?>

I select A1 and click "Book Seats" but not working no any action showing me on screen


https://chatgpt.com/share/b10b4ec8-465f-46a4-9445-157e24f712f0
